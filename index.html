<html>
  <head>
    <title>test</title>
     <script src="/js/sigma.min.js"></script>
  </head>
  <body>
    <h1>test</h1>

    <div class="container">
      <div class="row">
        <h2 class="span12" id="post-title">Load and display a GEXF encoded graph</h2>

        <div class="span12 buttons-container">
          <button class="btn" id="stop-layout">Stop Layout</button>
          <button class="btn" id="rescale-graph">Rescale Graph</button>
        </div>

        <div class="span12 sigma-parent" id="sigma-example-parent">
          <div class="sigma-expand" id="sigma-example"></div>
        </div>

        <script src="/js/sigma.parseGexf.js"></script>
        <script src="/js/sigma.forceatlas2.js"></script>
        <script type="text/javascript">
          function init() {
            // Instanciate sigma.js and customize rendering :
            var sigInst = sigma.init(document.getElementById('sigma-example')).drawingProperties({
              defaultLabelColor: '#fff',
              defaultLabelSize: 14,
              defaultLabelBGColor: '#fff',
              defaultLabelHoverColor: '#000',
              labelThreshold: 6
            }).graphProperties({
              minNodeSize: 0.5,
              maxNodeSize: 5,
              minEdgeSize: 1,
              maxEdgeSize: 1
            }).mouseProperties({
              maxRatio: 32
            });

            // Parse a GEXF encoded file to fill the graph
            // (requires "sigma.parseGexf.js" to be included)
            // sigInst.parseGexf('/clr486.gexf');
            // sigInst.parseGexf('/arctic.gexf');
            // sigInst.parseGexf('/hierarchy1.gexf');
            sigInst.parseGexf('/hackage.gexf');

//             sigInst.bind('overnodes', function(event){
//               var nodes = event.content;
//               var neighbors = {};
//               sigInst.iterEdges(function(e){
//                 if(nodes.indexOf(e.source)>=0 || nodes.indexOf(e.target)>=0){
//                   neighbors[e.source] = 1;
//                   neighbors[e.target] = 1;
//                 }
//               }).iterNodes(function(n){
//                 if(!neighbors[n.id]){
//                   n.hidden = 1;
//                 }else{
//                   n.hidden = 0;
//                 }
//               }).draw(2,2,2);
//             }).bind('outnodes', function(){
//               sigInst.iterEdges(function(e){
//                 e.hidden = 0;
//               }).iterNodes(function(n){
//                 n.hidden = 0;
//               }).draw(2,2,2);
//             });

            sigInst.startForceAtlas2();

            var isRunning = true;
            document.getElementById('stop-layout').addEventListener('click',function(){
              if(isRunning){
                isRunning = false;
                sigInst.stopForceAtlas2();
                document.getElementById('stop-layout').childNodes[0].nodeValue = 'Start Layout';
              }else{
                isRunning = true;
                sigInst.startForceAtlas2();
                document.getElementById('stop-layout').childNodes[0].nodeValue = 'Stop Layout';
              }
            },true);
            document.getElementById('rescale-graph').addEventListener('click',function(){
              sigInst.position(0,0,1).draw();
            },true);
          }

          if (document.addEventListener) {
            document.addEventListener("DOMContentLoaded", init, false);
          } else {
            window.onload = init;
          }
        </script>

        <style type="text/css">
            /* sigma.js context : */
              .sigma-parent {
                position: relative;
                border-radius: 4px;
                -moz-border-radius: 4px;
                -webkit-border-radius: 4px;
                background: #222;
                height: 1024px;
              }
              .sigma-expand {
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
              }
              .buttons-container{
                padding-bottom: 8px;
                padding-top: 12px;
              }
        </style>

      </div>
    </div>
  </body>
</html>
